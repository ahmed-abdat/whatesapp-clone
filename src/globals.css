@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --primary: 142 70% 49%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;

    --radius: 0.5rem;

    /* WhatsApp Theme Colors - Updated to exact brand green */
    --whatsapp-primary: 167 100% 33%; /* #00a884 - WhatsApp brand green */
    --whatsapp-primary-100: 167 65% 85%; /* Light tint of brand green */
    --whatsapp-primary-dark: 169 100% 25%; /* ~#008069 - darker brand green */
    --whatsapp-primary-darker: 169 100% 21%; /* Deeper dark variant */
    --whatsapp-bg: 210 11% 96%; /* Light gray background #f0f2f5 */
    --whatsapp-chat-bg: 38 15% 93%; /* Chat background #efeae2 */
    --whatsapp-chat-bg-deeper: 210 11% 94%; /* Deeper chat background */
    --whatsapp-message-out: 120 44% 88%; /* Outgoing message #d9fdd3 */
    --whatsapp-message-in: 0 0% 100%; /* Incoming message white */

    /* Color mappings */
    --color-gray: 200 12% 75%;
    --white-color-light: 242 100% 97%;
    --icon-color: 200 14% 37%;
    --icon-color-light: 200 12% 75%;
    --main-bgc: 210 11% 94%;
    --text-color: 200 41% 32%;
    --text-color-light: 200 14% 29%;
    --app-background: 38 15% 89%;
    --app-background-deeper: 194 16% 82%;

    /* Transitions */
    --tran-02: all 0.2s ease;
    --tran-03: all 0.3s ease;
    --tran-04: all 0.4s ease;
    --tran-05: all 0.5s ease;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;

    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    --primary: 142 70% 49%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-family: "Segoe UI", "Helvetica Neue", Helvetica, "Lucida Grande", Arial,
      Ubuntu, Cantarell, "Fira Sans", sans-serif, "Amiri";
  }
}

/* WhatsApp Clone Specific Styles */
.light-icon {
  color: hsl(var(--icon-color-light));
}

/* Utility Classes - Optimized for WhatsApp Clone */
.btn {
  @apply transition-all duration-300 ease-in-out cursor-pointer outline-none border-none;
}

.btn:focus-visible {
  @apply ring-2 ring-whatsapp-primary ring-offset-2;
}

.btn:disabled {
  @apply opacity-50 pointer-events-none cursor-not-allowed;
}

/* Arabic/RTL Support */
.f-ar,
.font-arabic {
  font-family: "Vazirmatn", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

.f-en {
  font-family: "Roboto", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

.dr-en {
  direction: ltr;
}

.dr-ar {
  direction: rtl;
}

.d-init {
  direction: initial;
}

/* Selection and Scrollbar Styling */
::selection {
  background-color: hsl(var(--whatsapp-primary));
  color: hsl(var(--white-color-light));
}

::-webkit-scrollbar {
  @apply w-1.5 h-1.5;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
  @apply bg-black/20 rounded;
}

/* Enhanced Focus States for Accessibility */
button:focus-visible,
input:focus-visible,
textarea:focus-visible {
  @apply ring-2 ring-whatsapp-primary ring-offset-2 outline-none;
}

/* Minimal Essential Styles - Prefer Tailwind classes in components */
@layer components {
  /* Custom scrollbar - cannot be done with Tailwind utilities */
  .messages-scroll {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }

  /* Emoji Picker Styling */
  .chat-page--container .emoji-picker aside.EmojiPickerReact.epr-main {
    @apply w-full !important;
    direction: initial;
  }

  .chat-page--container
    footer
    .EmojiPickerReact
    li.epr-emoji-category
    > .epr-emoji-category-label,
  .chat-page--container
    footer
    .EmojiPickerReact
    .epr-search-container
    input.epr-search {
    direction: rtl;
    font-family: "Vazirmatn", "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    font-size: 0.9rem;
  }
}

/* Inline emoji sizing and alignment
   - Ensure emoji images inserted into messages match surrounding text size
   - Keep alignment consistent with baseline to avoid jumping line heights
   - Applied globally because multiple components render <img class="emoji" /> */
img.emoji {
  width: 1em; /* scale with current font-size (works in previews and chat) */
  height: 1em;
  display: inline-block;
  vertical-align: -0.15em; /* nudge down slightly to sit on baseline like glyphs */
}

/* WhatsApp Layout Utilities - Pure Tailwind CSS Helper Classes */
@layer utilities {
  .whatsapp-container {
    @apply w-full max-w-6xl h-[calc(100vh-2rem)] lg:h-[calc(100vh-4rem)] bg-white rounded-none lg:rounded-lg shadow-none lg:shadow-2xl overflow-hidden;
  }

  .whatsapp-grid {
    @apply h-full grid grid-cols-1 md:grid-cols-[400px_1fr];
  }

  .whatsapp-sidebar {
    @apply bg-white border-r border-gray-200 flex flex-col;
  }

  .whatsapp-chat {
    @apply bg-white flex flex-col;
  }

  .whatsapp-header-bar {
    @apply hidden lg:block fixed top-0 left-0 w-full h-32 bg-whatsapp-primary z-0;
  }

  .whatsapp-main-wrapper {
    @apply relative z-10 flex justify-center items-center min-h-screen p-4 lg:p-8;
  }
}

/* Mobile Chat Container Overrides - Only when needed for complex components */
@media screen and (max-width: 767px) {
  .chat-page--container {
    @apply fixed inset-0 w-full h-full z-50 bg-white;
  }

  .chat-page--container header {
    @apply px-2 py-2.5 h-14;
  }

  .chat-page--container .back .icon {
    @apply block ml-1 text-xl text-[#54656f] cursor-pointer p-2 -ml-2 rounded-full hover:bg-gray-100 transition-colors;
  }

  .chat-page--container .chat-content .message--container .message {
    @apply max-w-[90%] mx-1;
  }

  .chat-page--container .chat-content .message--container .container {
    @apply px-2 py-2 gap-1;
  }

  .chat-page--container footer {
    @apply px-2 py-2;
  }

  .chat-page--container header button {
    @apply min-h-[44px] min-w-[44px];
  }

  .chat-page--container .message--container {
    @apply px-1;
  }
}
